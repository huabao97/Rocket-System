{"version":3,"sources":["webpack:///./src/assets/Js/common/common.js","webpack:///./src/components/drawFunction/drawKG.vue?209f","webpack:///src/components/drawFunction/drawKG.vue","webpack:///./src/components/drawFunction/drawKG.vue?35b4","webpack:///./src/components/drawFunction/drawKG.vue","webpack:///./src/assets/img/icon/shrink.svg","webpack:///./src/assets/img/icon/expand.svg","webpack:///./src/components/drawFunction/drawKG.vue?0cb4","webpack:///./node_modules/zl_calculator_zl/main.js"],"names":["commonF","getTime","strictIsoParse","d3","Date","calculator","CalString","res","zlCalculatorZl","drawForceGraph","nodes","links","svgWidth","svgHeight","drawGraph","container","setContainer","simulations","simulation","svg","append","attr","svg1","transform","g","link","selectAll","data","join","d","undefined","color","source","id","target","node","call","drag","on","this","style","text","nodeName","length","slice","relation","x","y","addData","datas","simu","force","distance","strength","getBoundingClientRect","width","height","dragstarted","active","alphaTarget","restart","fx","fy","dragged","dragended","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","$event","iconF","_e","_v","staticRenderFns","name","iconD","methods","num","_this","mounted","grad","common","component","module","exports","global","factory","express","replace","houExpress","symbolStack","getLea","sy","isNumber","n","ns","includes","isOpt","opts","itemNumber","itemSy","i","push","pop","max","reverse","concat","numStack","maxv","parseFloat","Object","defineProperty","value"],"mappings":"kKAGMA,EAAU,CAEdC,QAAS,WACP,IAAIC,EAAiBC,OAAc,qBACnC,OAAOD,EAAe,IAAIE,OAG5BC,WAAY,SAACC,GACX,IAAMC,EAAMC,4BAAeF,GAC3B,OAAOC,GAGTE,eAAgB,WACd,IAAIC,EAAQ,GACRC,EAAQ,GACRC,EAAW,IACXC,EAAY,IAEhB,SAASC,EAAWC,GAClBC,EAAaD,GACb,IAAME,EAAcC,EAAWR,EAAOC,GAChCQ,EAAMhB,OAAUY,GAAWK,OAAO,OAAOC,KAAK,UAAW,CAAC,EAAG,EAAGT,EAAUC,IAC1ES,EAAOC,EAAUJ,GACvBG,EAAKF,OAAO,UACTC,KAAK,KAAM,cACXA,KAAK,OAAQ,IACbA,KAAK,OAAQ,GACbA,KAAK,SAAU,QACfA,KAAK,eAAgB,GACrBA,KAAK,cAAe,eACpBA,KAAK,cAAe,kBACpBA,KAAK,UAAW,cAChBA,KAAK,cAAe,GACpBA,KAAK,eAAgB,GACrBD,OAAO,QACPC,KAAK,IAAK,uBACVA,KAAK,OAAQ,SACbA,KAAK,iBAAkB,IAC1B,IAAMG,EAAIF,EAAKF,OAAO,KAAKC,KAAK,QAAS,UAInCI,EAAOD,EAAEJ,OAAO,KAAKC,KAAK,QAAS,SACtCA,KAAK,iBAAkB,IACvBA,KAAK,aAAc,oBACnBK,UAAU,QACVC,KAAKhB,GACLiB,KAAK,QACLP,KAAK,UAAU,SAAUQ,GACxB,YAAgBC,IAAZD,EAAEE,MACGF,EAAEE,MAEF,WAGVV,KAAK,eAAgB,GACrBA,KAAK,QAAS,QACdA,KAAK,MAAM,SAAAQ,GAAC,OAAIA,EAAEG,OAAOC,GAAK,IAAMJ,EAAEK,OAAOD,MAE1CE,EAAOX,EAAEJ,OAAO,KAAKC,KAAK,QAAS,SACtCA,KAAK,SAAU,SACfA,KAAK,eAAgB,GACrBK,UAAU,UACVC,KAAKjB,GACLkB,KAAK,UACLP,KAAK,IAAK,IACVA,KAAK,OAAQ,WACbA,KAAK,SAAS,SAAUQ,GACvB,OAAOA,EAAEI,MAEVG,KAAKC,EAAKpB,IACVqB,GAAG,aAAa,SAAUT,GACzB1B,OAAUoC,MAAMlB,KAAK,eAAgB,MAEtCiB,GAAG,YAAY,SAAUT,GACxB1B,OAAUoC,MAAMlB,KAAK,eAAgB,MAGzCc,EAAKf,OAAO,SACToB,MAAM,QAAS,IACfC,MAAK,SAAUZ,GACd,OAAOA,EAAEI,MAGb,IAAMS,EAAWlB,EAAEJ,OAAO,KAAKC,KAAK,QAAS,YAC1CK,UAAU,QACVC,KAAKjB,GACLkB,KAAK,QACLP,KAAK,IAAK,IACVA,KAAK,IAAK,GACVA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXmB,MAAM,cAAe,QACrBA,MAAM,YAAa,GACnBA,MAAM,OAAQ,SACdA,MAAM,UAAW,OACjBnB,KAAK,cAAe,UACpBA,KAAK,QAAS,aACdoB,MAAK,SAAUZ,GACd,OAAIA,EAAEI,GAAGU,OAAS,EACTd,EAAEI,GAAGW,MAAM,EAAG,GAAK,MAEnBf,EAAEI,MA8Bf,OA1BAT,EAAEJ,OAAO,KAAKM,UAAU,QACrBC,KAAKhB,GACLiB,KAAK,QACLP,KAAK,MAAO,GACZmB,MAAM,OAAQ,SACdA,MAAM,UAAW,OACjBnB,KAAK,cAAe,UACpBA,KAAK,YAAa,GAClBD,OAAO,YACPC,KAAK,cAAc,SAAAQ,GAAC,MAAI,IAAMA,EAAEG,OAAOC,GAAK,IAAMJ,EAAEK,OAAOD,MAC3DZ,KAAK,cAAe,OACpBoB,MAAK,SAAUZ,GACd,OAAOA,EAAEgB,YAEVT,KAAKC,EAAKnB,IAEbD,EAAYqB,GAAG,QAAQ,WACrBH,EACGd,KAAK,MAAM,SAAAQ,GAAC,OAAIA,EAAEiB,KAClBzB,KAAK,MAAM,SAAAQ,GAAC,OAAIA,EAAEkB,KACrBtB,EACGJ,KAAK,KAAK,SAAAQ,GAAC,MAAI,IAAMA,EAAEG,OAAOc,EAAI,IAAMjB,EAAEG,OAAOe,EAAI,IAAMlB,EAAEK,OAAOY,EAAI,IAAMjB,EAAEK,OAAOa,KAC1FL,EACGrB,KAAK,KAAK,SAAAQ,GAAC,OAAIA,EAAEiB,KACjBzB,KAAK,KAAK,SAAAQ,GAAC,OAAIA,EAAEkB,QAEfjC,EAETA,EAAUkC,QAAU,SAAUC,GAG5B,OAFAvC,EAAQuC,EAAMvC,MACdC,EAAQsC,EAAMtC,MACPG,GAGT,IAAII,EAAa,SAAUR,EAAOC,GAChC,IAAMuC,EAAO/C,OAAmBO,GAC7ByC,MAAM,YAAahD,OAAgB,KACnCgD,MAAM,OAAQhD,OAAaQ,GAAOsB,IAAG,SAAAJ,GAAC,OAAIA,EAAEI,MAAImB,SAAS,MACzDD,MAAM,SAAUhD,SAAmBkD,UAAU,KAG7CF,MAAM,SAAUhD,OAAeS,EAAW,EAAGC,EAAY,IACzDsC,MAAM,SAAUhD,OAAeS,EAAW,EAAGC,EAAY,IAC5D,OAAOqC,GAEL3B,EAAY,SAAUJ,GAKxB,OAJAA,EAAIiB,KAAKjC,SAAUmC,GAAG,QAAQ,WAC5BnC,OAAU,WAAWkB,KAAK,YAAalB,OAASoB,eAG3CJ,GAELH,EAAe,SAAUD,GAC3BH,EAAWT,OAAUY,GAAWoB,OAAOmB,wBAAwBC,MAC/D1C,EAAYV,OAAUY,GAAWoB,OAAOmB,wBAAwBE,QAE9DnB,EAAO,SAAUnB,GACnB,SAASuC,EAAa5B,GACf1B,OAASuD,QAAQxC,EAAWyC,YAAY,IAAKC,UAClD/B,EAAEgC,GAAKhC,EAAEiB,EACTjB,EAAEiC,GAAKjC,EAAEkB,EAGX,SAASgB,EAASlC,GAChBA,EAAEgC,GAAK1D,OAAS2C,EAChBjB,EAAEiC,GAAK3D,OAAS4C,EAGlB,SAASiB,EAAWnC,GACb1B,OAASuD,QAAQxC,EAAWyC,YAAY,GAC7C9B,EAAEgC,GAAK,KACPhC,EAAEiC,GAAK,KAGT,OAAO3D,SACJmC,GAAG,QAASmB,GACZnB,GAAG,OAAQyB,GACXzB,GAAG,MAAO0B,IAGf,OAAOlD,IAIId,U,yCCjMf,IAAIiE,EAAS,WAAa,IAAIC,EAAI3B,KAAS4B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAAEH,EAAS,MAAEG,EAAG,MAAM,CAACE,YAAY,cAAcC,MAAM,CAAC,IAAM,EAAQ,QAAoC,IAAM,MAAMlC,GAAG,CAAC,MAAQ,SAASmC,GAAQ,OAAOP,EAAIQ,MAAM,OAAOR,EAAIS,KAAQT,EAAS,MAAiKA,EAAIS,KAAlKN,EAAG,MAAM,CAACE,YAAY,cAAcC,MAAM,CAAC,IAAM,EAAQ,QAAoC,IAAM,MAAMlC,GAAG,CAAC,MAAQ,SAASmC,GAAQ,OAAOP,EAAIQ,MAAM,SAAkBL,EAAG,MAAM,CAACE,YAAY,aAAcL,EAAS,MAAEG,EAAG,MAAM,CAACE,YAAY,aAAa,CAACL,EAAIU,GAAG,WAAWV,EAAIS,OAAQT,EAAS,MAAEG,EAAG,MAAM,CAACE,YAAY,aAAa,CAACL,EAAIU,GAAG,YAAYV,EAAIS,QACnvBE,EAAkB,G,wBCqBtB,GACEC,KAAM,SACNnD,KAFF,WAGI,MAAO,CACLoD,OAAO,EACP9B,MAAO,CACLvC,MAAO,CACf,CAAU,GAAV,MAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,SAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,MAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,OAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,MAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,MAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,MAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,SAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,MAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,OAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,MAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,MAAU,MAAV,EAAU,MAAV,WAAU,MAAV,WACA,CAAU,GAAV,MAAU,MAAV,EAAU,MAAV,WAAU,MAAV,YAEQC,MAAO,CACf,CAAU,OAAV,MAAU,OAAV,SAAU,MAAV,EAAU,SAAV,OAAU,MAAV,SACA,CAAU,OAAV,MAAU,OAAV,SAAU,MAAV,EAAU,SAAV,OAAU,MAAV,aAKEqE,QAAS,CACPN,MADJ,SACA,GACM,IAAN,OACM,OAAQO,GACN,KAAK,EACHC,EAAMH,OAAQ,EACd5E,EAAV,kEACUA,EAAV,gEACU,MACF,KAAK,EACH+E,EAAMH,OAAQ,EACd5E,EAAV,iEACUA,EAAV,+DACU,SAIRgF,QA7CF,WA8CI,IAAIC,EAAOC,EAAf,0CACID,EAAK,WACLC,EAAJ,kBCtE+V,I,wBCQ3VC,EAAY,eACd,EACArB,EACAY,GACA,EACA,KACA,WACA,MAIa,aAAAS,E,8BCnBfC,EAAOC,QAAU,IAA0B,2B,qBCA3CD,EAAOC,QAAU,IAA0B,2B,kCCA3C,yBAAuf,EAAG,G,6CCAzf,SAAUC,EAAQC,GACgDA,EAAQF,IAD3E,CAIEjD,GAAM,SAAWiD,GAAW,aAI1B,SAAShF,EAAemF,GAEhBA,EAAUA,EAAQC,QAAQ,MAAO,IAArC,IAGIC,EAAa,GACbC,EAAc,GAGlB,SAASC,EAAOC,GACZ,MAAU,KAANA,GAAmB,KAANA,EACN,EAEI,KAANA,GAAmB,KAANA,GAAiB,KAAJA,EACxB,EAEC,EAGhB,SAASC,EAASC,GACd,IAAIC,EAAK,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5D,OAAOA,EAAGC,SAASF,GAGvB,SAASG,EAAMH,GACX,IAAII,EAAO,CAAC,IAAK,IAAK,IAAK,IAAI,KAC/B,OAAOA,EAAKF,SAASF,GAGzB,IAAIK,EAAa,GACbC,EAAS,GACb,IAAK,IAAIC,EAAI,EAAGA,EAAId,EAAQhD,OAAQ8D,IAEhC,GAAkB,KAAdd,EAAQc,GAERX,EAAYY,KAAKf,EAAQc,SAExB,GAAkB,KAAdd,EAAQc,GAAW,CAExB,MAA8C,KAAvCX,EAAYA,EAAYnD,OAAS,GACpCkD,EAAWa,KAAKZ,EAAYa,OAEhCb,EAAYa,WAGX,GAAIV,EAASN,EAAQc,IACtBF,GAAcZ,EAAQc,IAClBA,GAAKd,EAAQhD,OAAS,GAIC,KAAlBgD,EAAQc,EAAI,MAHjBZ,EAAWa,KAAKH,GAChBA,EAAa,QAQhB,CASD,GANmB,KAAfA,GAAmBV,EAAWa,KAAKH,GAEvCA,EAAa,GACbC,EAASb,EAAQc,GAGU,IAAvBX,EAAYnD,OAAcmD,EAAYY,KAAKF,QAC1C,GAA4C,MAAxCV,EAAYA,EAAYnD,OAAS,GAAYmD,EAAYY,KAAKF,QAClE,GAAIT,EAAOS,GAAUT,EAAOD,EAAYA,EAAYnD,OAAS,IAE9DmD,EAAYY,KAAKF,QAMjB,GAHAX,EAAWa,KAAKZ,EAAYa,OAGF,GAAtBb,EAAYnD,QAAsD,KAAvCmD,EAAYA,EAAYnD,OAAS,IAAaoD,EAAOS,GAAUT,EAAOD,EAAYA,EAAYnD,OAAS,IAClImD,EAAYY,KAAKF,OAEhB,CACD,IAAII,EAAMd,EAAYnD,OAAS,EAC/B,MAAOoD,EAAOS,IAAWT,EAAOD,EAAYc,IAAO,CAG/C,GADAf,EAAWa,KAAKZ,EAAYa,SACxBC,EAAM,GACL,CACDd,EAAYY,KAAKF,GACjB,MAHSI,KASzBJ,EAAS,GAKjBV,EAAYe,UACZhB,EAAaA,EAAWiB,OAAOhB,GAC/BA,EAAc,GAId,IAAIiB,EAAW,GAEf,IAAK,IAAIN,EAAI,EAAGA,EAAIZ,EAAWlD,OAAQ8D,IAEnC,GAAKJ,EAAMR,EAAWY,IAEjB,CACD,IAAIlG,EAAM,EACNyG,EAAOD,EAASpE,OAAS,EAEzBpC,EADiB,KAAjBsF,EAAWY,GACLQ,WAAWF,EAASC,EAAO,IAAMC,WAAWF,EAASC,IAErC,KAAjBnB,EAAWY,GACVQ,WAAWF,EAASC,EAAO,IAAMC,WAAWF,EAASC,IAErC,KAAjBnB,EAAWY,GACVQ,WAAWF,EAASC,EAAO,IAAMC,WAAWF,EAASC,IAErC,KAAjBnB,EAAWY,GACVQ,WAAWF,EAASC,EAAO,IAAMC,WAAWF,EAASC,IAGrDC,WAAWF,EAASC,EAAO,IAAMC,WAAWF,EAASC,IAE/DD,EAASJ,MACTI,EAASJ,MACTI,EAASL,KAAKnG,QAtBSwG,EAASL,KAAKb,EAAWY,IA2BxD,OAAOM,EAAS,GAGpBvB,EAAQhF,eAAiBA,EAEzB0G,OAAOC,eAAe3B,EAAS,aAAc,CAAE4B,OAAO","file":"js/chunk-4089e26b.2a187f9f.js","sourcesContent":["import * as d3 from 'd3'\r\nimport { zlCalculatorZl } from 'zl_calculator_zl'\r\n\r\nconst commonF = {\r\n  // 获取实时时间\r\n  getTime: () => {\r\n    var strictIsoParse = d3.timeFormat('%m/%d/%Y-%H:%M:%S')\r\n    return strictIsoParse(new Date())\r\n  },\r\n  // 可做数字（包含小数和整数）间的加，减，乘，除，括号，取余，等运算\r\n  calculator: (CalString) => {\r\n    const res = zlCalculatorZl(CalString)\r\n    return res\r\n  },\r\n  // 绘制力导向图\r\n  drawForceGraph: () => {\r\n    var nodes = []\r\n    var links = []\r\n    var svgWidth = 400\r\n    var svgHeight = 350\r\n\r\n    function drawGraph (container) {\r\n      setContainer(container)\r\n      const simulations = simulation(nodes, links)\r\n      const svg = d3.select(container).append('svg').attr('viewBox', [0, 0, svgWidth, svgHeight])\r\n      const svg1 = transform(svg)\r\n      svg1.append('marker')\r\n        .attr('id', 'direction1')\r\n        .attr('refX', 33) // 设置箭头离端点的距离\r\n        .attr('refY', 0)\r\n        .attr('orient', 'auto')\r\n        .attr('stroke-width', 1)\r\n        .attr('markerUnits', 'strokeWidth')\r\n        .attr('markerUnits', 'userSpaceOnUse')\r\n        .attr('viewBox', '0 -5 10 10')\r\n        .attr('markerWidth', 6) // 设置箭头的大小\r\n        .attr('markerHeight', 6) // 设置箭头的大小，长宽统一则不变形\r\n        .append('path')\r\n        .attr('d', 'M 0 -5 L 10 0 L 0 5')\r\n        .attr('fill', 'black')\r\n        .attr('stroke-opacity', 0.4)\r\n      const g = svg1.append('g').attr('class', 'svgCon') // svg图的容器\r\n\r\n      // 绘制图形\r\n\r\n      const link = g.append('g').attr('class', 'linkG')\r\n        .attr('stroke-opacity', 0.5)\r\n        .attr('marker-end', 'url(#direction1)')\r\n        .selectAll('path')\r\n        .data(links)\r\n        .join('path')\r\n        .attr('stroke', function (d) {\r\n          if (d.color !== undefined) {\r\n            return d.color\r\n          } else {\r\n            return 'black'\r\n          }\r\n        })\r\n        .attr('stroke-width', 1)\r\n        .attr('class', 'link')\r\n        .attr('id', d => d.source.id + '_' + d.target.id)\r\n\r\n      const node = g.append('g').attr('class', 'nodeG')\r\n        .attr('stroke', 'black')\r\n        .attr('stroke-width', 1)\r\n        .selectAll('circle')\r\n        .data(nodes)\r\n        .join('circle')\r\n        .attr('r', 15)\r\n        .attr('fill', '#FFA07A')\r\n        .attr('class', function (d) {\r\n          return d.id\r\n        })\r\n        .call(drag(simulations))\r\n        .on('mouseover', function (d) {\r\n          d3.select(this).attr('stroke-width', 4)\r\n        })\r\n        .on('mouseout', function (d) {\r\n          d3.select(this).attr('stroke-width', 1)\r\n        })\r\n\r\n      node.append('title')\r\n        .style('width', 19)\r\n        .text(function (d) {\r\n          return d.id\r\n        })\r\n\r\n      const nodeName = g.append('g').attr('class', 'nodeName')\r\n        .selectAll('text')\r\n        .data(nodes)\r\n        .join('text')\r\n        .attr('x', 10)\r\n        .attr('y', 5)\r\n        .attr('dx', 0)\r\n        .attr('dy', 4)\r\n        .style('font-weight', 'bold')\r\n        .style('font-size', 9)\r\n        .style('fill', 'black')\r\n        .style('opacity', '0.8')\r\n        .attr('text-anchor', 'middle')\r\n        .attr('class', 'node_name')\r\n        .text(function (d) {\r\n          if (d.id.length > 2) {\r\n            return d.id.slice(0, 2) + '...'\r\n          } else {\r\n            return d.id\r\n          }\r\n        })\r\n\r\n      g.append('g').selectAll('text')\r\n        .data(links)\r\n        .join('text')\r\n        .attr('dy', -4)\r\n        .style('fill', 'black')\r\n        .style('opacity', '0.5')\r\n        .attr('text-anchor', 'middle')\r\n        .attr('font-size', 9)\r\n        .append('textPath')\r\n        .attr('xlink:href', d => '#' + d.source.id + '_' + d.target.id)\r\n        .attr('startOffset', '42%')\r\n        .text(function (d) {\r\n          return d.relation\r\n        })\r\n        .call(drag(simulation))\r\n\r\n      simulations.on('tick', () => {\r\n        node\r\n          .attr('cx', d => d.x)\r\n          .attr('cy', d => d.y)\r\n        link\r\n          .attr('d', d => 'M' + d.source.x + ' ' + d.source.y + 'L' + d.target.x + ' ' + d.target.y)\r\n        nodeName\r\n          .attr('x', d => d.x)\r\n          .attr('y', d => d.y)\r\n      })\r\n      return drawGraph\r\n    }\r\n    drawGraph.addData = function (datas) {\r\n      nodes = datas.nodes\r\n      links = datas.links\r\n      return drawGraph\r\n    }// 添加原始数据\r\n\r\n    var simulation = function (nodes, links) {\r\n      const simu = d3.forceSimulation(nodes)\r\n        .force('collision', d3.forceCollide(25))\r\n        .force('link', d3.forceLink(links).id(d => d.id).distance(100))\r\n        .force('charge', d3.forceManyBody().strength(-40))\r\n      // .force('x',d3.forceX())\r\n      // .force('y',d3.forceY())\r\n        .force('redius', d3.forceRadial(svgWidth / 2, svgHeight / 2))\r\n        .force('center', d3.forceCenter(svgWidth / 2, svgHeight / 2))\r\n      return simu\r\n    }\r\n    var transform = function (svg) {\r\n      svg.call(d3.zoom().on('zoom', function () {\r\n        d3.select('.svgCon').attr('transform', d3.event.transform)\r\n      })\r\n      )\r\n      return svg\r\n    }\r\n    var setContainer = function (container) {\r\n      svgWidth = d3.select(container).node().getBoundingClientRect().width\r\n      svgHeight = d3.select(container).node().getBoundingClientRect().height\r\n    }\r\n    var drag = function (simulation) {\r\n      function dragstarted (d) {\r\n        if (!d3.event.active) simulation.alphaTarget(0.3).restart()\r\n        d.fx = d.x\r\n        d.fy = d.y\r\n      }\r\n\r\n      function dragged (d) {\r\n        d.fx = d3.event.x\r\n        d.fy = d3.event.y\r\n      }\r\n\r\n      function dragended (d) {\r\n        if (!d3.event.active) simulation.alphaTarget(0)\r\n        d.fx = null\r\n        d.fy = null\r\n      }\r\n\r\n      return d3.drag()\r\n        .on('start', dragstarted)\r\n        .on('drag', dragged)\r\n        .on('end', dragended)\r\n    }\r\n\r\n    return drawGraph\r\n  }\r\n}\r\n\r\nexport default commonF\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"drawKG\"},[_c('div',{staticClass:\"Maindisplay\"},[_c('div',{staticClass:\"KGdisplay\"},[_c('div',[(_vm.iconD)?_c('img',{staticClass:\"iconControl\",attrs:{\"src\":require(\"../../assets/img/icon/expand.svg\"),\"alt\":\"放大\"},on:{\"click\":function($event){return _vm.iconF(1)}}}):_vm._e(),(!(_vm.iconD))?_c('img',{staticClass:\"iconControl\",attrs:{\"src\":require(\"../../assets/img/icon/shrink.svg\"),\"alt\":\"放大\"},on:{\"click\":function($event){return _vm.iconF(2)}}}):_vm._e()]),_c('div',{staticClass:\"KGSvgs\"})]),(_vm.iconD)?_c('div',{staticClass:\"databaseC\"},[_vm._v(\"数据的存储\")]):_vm._e()]),(_vm.iconD)?_c('div',{staticClass:\"KGcontrol\"},[_vm._v(\" 控制面板 \")]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"drawKG\">\r\n      <div class=\"Maindisplay\">\r\n        <div class=\"KGdisplay\">\r\n          <div>\r\n            <img src=\"../../assets/img/icon/expand.svg\" alt=\"放大\" class=\"iconControl\" v-if=\"iconD\" @click=\"iconF(1)\">\r\n            <img src=\"../../assets/img/icon/shrink.svg\" alt=\"放大\" class=\"iconControl\" v-if=\"!(iconD)\" @click=\"iconF(2)\">\r\n          </div>\r\n          <div class=\"KGSvgs\"></div>\r\n        </div>\r\n        <div class=\"databaseC\" v-if=\"iconD\">数据的存储</div>\r\n      </div>\r\n      <div class=\"KGcontrol\" v-if=\"iconD\">\r\n        控制面板\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from 'd3'\r\nimport commonF from '@/assets/Js/common/common'\r\n// import fss from 'fs'\r\nexport default {\r\n  name: 'drawKG',\r\n  data () {\r\n    return {\r\n      iconD: true,\r\n      datas: {\r\n        nodes: [\r\n          { id: '钢材库', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '预处理工位1', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '校平1', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '热处理1', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '抛丸1', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '喷漆1', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '烘干1', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '预处理工位2', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '校平2', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '热处理2', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '抛丸2', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '喷漆2', group: 1, label: 'position', color: '#F4A460' },\r\n          { id: '烘干2', group: 1, label: 'position', color: '#F4A460' }\r\n        ],\r\n        links: [\r\n          { source: '钢材库', target: '预处理工位1', value: 1, relation: 'Flow', color: 'black' },\r\n          { source: '钢材库', target: '预处理工位2', value: 1, relation: 'Flow', color: 'black' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    iconF (num) {\r\n      const _this = this\r\n      switch (num) {\r\n        case 1:\r\n          _this.iconD = false\r\n          d3.select('.Maindisplay').style('width', '100%').style('height', '100%')\r\n          d3.select('.KGdisplay').style('width', '100%').style('height', '100%')\r\n          break\r\n        case 2:\r\n          _this.iconD = true\r\n          d3.select('.Maindisplay').style('width', '40%').style('height', '100%')\r\n          d3.select('.KGdisplay').style('width', '100%').style('height', '80%')\r\n          break\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    var grad = commonF.drawForceGraph().addData(this.datas)\r\n    grad('.KGSvgs')\r\n    commonF.readJson()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  @import url(\"../../assets/Css/home/drawCss/drawKG.css\");\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drawKG.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drawKG.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./drawKG.vue?vue&type=template&id=fcb31156&scoped=true&\"\nimport script from \"./drawKG.vue?vue&type=script&lang=js&\"\nexport * from \"./drawKG.vue?vue&type=script&lang=js&\"\nimport style0 from \"./drawKG.vue?vue&type=style&index=0&id=fcb31156&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fcb31156\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/shrink.d6a0b7f1.svg\";","module.exports = __webpack_public_path__ + \"img/expand.834c777c.svg\";","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drawKG.vue?vue&type=style&index=0&id=fcb31156&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drawKG.vue?vue&type=style&index=0&id=fcb31156&scoped=true&lang=css&\"","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = global || self, factory(global.zl_calculator_zlt = {}));\n}(this, (function (exports) { 'use strict';\n\n    // 原理：https://blog.csdn.net/u011463794/article/details/85220335\n    // 使用栈实现计算器功能:此计算器只包含加减乘除括号运行\n    function zlCalculatorZl(express) {\n        //先去掉表达式中的所有空格\n        var express = express.replace(/\\s/g, \"\");\n        // console.log(express)\n        //---------------把中缀表达式转换为后缀表达式-----------------------\n        var houExpress = [];//初始的后缀表达式（以数组形式存储）\n        var symbolStack = [];//初始化的符号栈\n\n        //得到运算符优先级量化的函数\n        function getLea(sy) {\n            if (sy == \"+\" || sy == \"-\") {\n                return 1;  //+，-优先级较低为1\n            }\n            else if (sy == \"*\" || sy == \"/\" || sy==\"%\") {\n                return 2; //*，/优先级较高为2\n            }\n            else return 0; //如果不为加减乘除符号，则量化为0\n        }\n        //判断某个字符是否为数字字符的函数(包含了小数)\n        function isNumber(n) {\n            var ns = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '.'];\n            return ns.includes(n)\n        }\n        //判断某个字符串是否为运算符\n        function isOpt(n) {\n            var opts = ['+', '-', '*', '/','%'];\n            return opts.includes(n)\n        }\n        //开始把中缀表达式转换为右缀表达式\n        var itemNumber = \"\";//表示临时运算数\n        var itemSy = \"\";//表示临时运算符\n        for (let i = 0; i < express.length; i++) {\n            // console.log(express[i])\n            if (express[i] == \"(\") {\n                //入栈\n                symbolStack.push(express[i]);\n            }\n            else if (express[i] == \")\") {\n                //依次把运算符栈中的的运算符加入后缀表达式中，直到出现’(’，从栈中删除’(’\n                while (symbolStack[symbolStack.length - 1] != \"(\") {\n                    houExpress.push(symbolStack.pop());\n                }\n                symbolStack.pop();//直到出现’(’，从栈中删除’(’\n\n            }\n            else if (isNumber(express[i])) {  //如果是数字\n                itemNumber += express[i];\n                if (i == express.length - 1) {\n                    houExpress.push(itemNumber);// 如果当前数是最后一位数，则直接将运算数加入到后缀表达式数组中\n                    itemNumber = \"\";\n                }\n                else if (express[i + 1] == \")\") {\n                    houExpress.push(itemNumber);// 当数字后面是）符号时，将运算数加入到后缀表达式数组中，因为）运算在前面被拦截了\n                    itemNumber = \"\";\n\n                }\n            }\n            else { //如果是运算符\n                // console.log(\"数字：\", itemNumber, express[i])\n\n                if (itemNumber !== \"\") houExpress.push(itemNumber);// 通过判断itemNumber是否为而得之此数字是否已经在前面添加了，如果未添加，则将运算数加入到后缀表达式数组中\n\n                itemNumber = \"\";//重置临时运算数变量已接收下个数\n                itemSy = express[i];//如果是运算符，（执行到这里，说明上一个数包括可能存在的小数点都拿到了，然后把当前符号保存下就开始处理上面的数）\n                //运算符入栈规则\n                // console.log(\"显示所有的运算符：\",itemSy,symbolStack);\n                if (symbolStack.length === 0) symbolStack.push(itemSy);//如果运算符的栈为空,直接将运算符入栈\n                else if (symbolStack[symbolStack.length - 1] === \"(\") symbolStack.push(itemSy);//如果运算符的栈顶是\"(\",直接将运算符入栈\n                else if (getLea(itemSy) > getLea(symbolStack[symbolStack.length - 1])) {//如果当前运算符大于栈顶运算符的优先级，直接入栈\n                    // console.log(\"打印出当前运算符合栈顶运算符：\",itemSy,getLea(itemSy),symbolStack[symbolStack.length - 1],getLea(symbolStack[symbolStack.length - 1]))\n                    symbolStack.push(itemSy);\n                }\n                else {//如果当前运算符小于等于栈顶运算符,则弹出栈顶运算符加入到后缀表达式中\n                    houExpress.push(symbolStack.pop());\n                    // console.log(\"后缀+符号\", houExpress, symbolStack)\n                    //如果栈顶符号出栈后就空了，或者为(,或者优先级低于当前符号，那么就直接把当前的符号入栈\n                    if (symbolStack.length == 0 || symbolStack[symbolStack.length - 1] == \"(\" || getLea(itemSy) > getLea(symbolStack[symbolStack.length - 1])) {\n                        symbolStack.push(itemSy);\n                    }\n                    else {  //说明出栈后的栈顶运算符优先级仍然大于等于当前于运算符，于是通过循环继续查找判断\n                        var max = symbolStack.length - 1; //获取最大下标\n                        while (getLea(itemSy) <= getLea(symbolStack[max])) {//继续在运算符栈里面查找：新的栈顶运算符是否还是大于等于当前运算符，如果大于等于则继续出栈\n                            // console.log(symbolStack, \"符号比较：\", itemSy, getLea(itemSy), symbolStack[max], getLea(symbolStack[max]));\n                            houExpress.push(symbolStack.pop());\n                            if (max > 0) max--;\n                            else {\n                                symbolStack.push(itemSy);\n                                break;\n                            }\n                        }\n                    }\n                }\n                // console.log(\"运算符栈\",symbolStack)\n                itemSy = \"\";//重置临时运算符变量,以便下次运算\n\n            }\n        }\n        //如果扫描的中缀表达式结束时，运算符栈中的还有符号，则所有符号出栈；\n        symbolStack.reverse();\n        houExpress = houExpress.concat(symbolStack);\n        symbolStack = [];//重置运算符数组栈\n        // console.log(\"中缀\", express);\n        // console.log(\"后缀\", houExpress);\n        //---------------------- 对后缀表达式进行计算 --------------------\n        var numStack = []; //数字栈\n        //从左到右读后缀表达式\n        for (let i = 0; i < houExpress.length; i++) {\n            //遇到操作数压入数字栈中\n            if (!isOpt(houExpress[i])) numStack.push(houExpress[i]);\n            //遇到操作符取并弹出栈顶n个元素，（n取决于操作符是n元操作符），计算结果压入栈中\n            else {\n                var res = 0;\n                var maxv = numStack.length - 1;\n                if (houExpress[i] == \"+\") {\n                    res = parseFloat(numStack[maxv - 1]) + parseFloat(numStack[maxv]);\n                }\n                else if (houExpress[i] == \"-\") {\n                    res = parseFloat(numStack[maxv - 1]) - parseFloat(numStack[maxv]);\n                }\n                else if (houExpress[i] == \"*\") {\n                    res = parseFloat(numStack[maxv - 1]) * parseFloat(numStack[maxv]);\n                }\n                else if (houExpress[i] == \"/\") {\n                    res = parseFloat(numStack[maxv - 1]) / parseFloat(numStack[maxv]);\n                }\n                else{  //取余%\n                    res = parseFloat(numStack[maxv - 1]) % parseFloat(numStack[maxv]);\n                }\n                numStack.pop();\n                numStack.pop();\n                numStack.push(res);\n            }\n        }\n        //后缀表达式读完，当前栈顶元素即为结果\n        // console.log(\"结果为：\", numStack[0])\n        return numStack[0]; //返回结果\n    }\n\n    exports.zlCalculatorZl = zlCalculatorZl;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"],"sourceRoot":""}